<launch>
  <!-- Launch Arguments -->
  <arg name="vision_addr" default="224.5.23.2" description="Set multicast address to connect SSL-Vision."/>
  <arg name="vision_port" default="10006" description="Set multicast port to connect SSL-Vision."/>
  <arg name="referee_addr" default="224.5.23.1" description="Set multicast address to connect Game Controller."/>
  <arg name="referee_port" default="11111" description="Set multicast port to connect Game Controller."/>
  <!--    <arg name="referee_port" default="10003" description="Set multicast port to connect Game Controller."/>-->
  <arg name="team" default="ibis" description="team name"/>
  <arg name="sim" default="true" description="Set true if you want to use simulator."/>
  <arg name="original_grsim" default="false" description="Set true if you want to default grsim."/>
  <arg name="simple_ai" default="false" description="a"/>
  <arg name="max_vel" default="5.0" description="Set max velocity of robot."/>
  <set_parameter name="use_sim_time" value="$(var sim)"/>

  <!-- Nodes -->
  <group if="$(var simple_ai)">
    <node pkg="crane_simple_ai" exec="crane_simple_ai" output="screen"/>
  </group>

  <group unless="$(var simple_ai)">
    <node pkg="crane_session_controller" exec="crane_session_controller_node" output="screen">
      <param name="initial_session" value="HALT"/>
      <param name="event_config_file_name" value="normal.yaml"/>
    </node>
  </group>

  <group if="$(var sim)">
    <node pkg="crane_local_planner" exec="crane_local_planner_node" output="screen">
      <param name="planner" value="gridmap"/>
      <param name="p_gain" value="2.0"/>
      <param name="i_gain" value="0.00"/>
      <param name="i_saturation" value="0.00"/>
      <param name="d_gain" value="1.0"/>
      <param name="max_vel" value="$(var max_vel)"/>
    </node>

    <node pkg="crane_clock_publisher" exec="crane_clock_publisher_node" output="screen">
      <param name="time_scale" value="1.00"/>
    </node>
  </group>

  <group unless="$(var sim)">
    <node pkg="crane_local_planner" exec="crane_local_planner_node" output="screen">
      <param name="planner" value="gridmap"/>
      <param name="p_gain" value="3.0"/>
      <param name="i_gain" value="0.0"/>
      <param name="i_saturation" value="0.0"/>
      <param name="d_gain" value="0.8"/>
      <param name="max_vel" value="$(var max_vel)"/>
    </node>
  </group>

  <group if="$(var original_grsim)">
    <node pkg="crane_sender" exec="sim_sender_node" output="screen">
      <param name="no_movement" value="false"/>
      <param name="theta_kp" value="3.5"/>
      <param name="theta_ki" value="0.0"/>
      <param name="theta_kd" value="0.5"/>
      <param name="sim_mode" value="true"/>
    </node>
  </group>

  <group unless="$(var original_grsim)">
    <node pkg="crane_sender" exec="ibis_sender_node" output="screen">
      <param name="no_movement" value="false"/>
      <param name="theta_kp" value="3.5"/>
      <param name="theta_ki" value="0.0"/>
      <param name="theta_kd" value="0.5"/>
      <param name="sim_mode" value="$(var sim)"/>
    </node>
  </group>

  <node pkg="robocup_ssl_comm" exec="vision_node">
    <param name="multicast_address" value="$(var vision_addr)"/>
    <param name="multicast_port" value="$(var vision_port)"/>
  </node>

  <node pkg="robocup_ssl_comm" exec="game_controller_node">
    <param name="multicast_address" value="$(var referee_addr)"/>
    <param name="multicast_port" value="$(var referee_port)"/>
  </node>

  <node pkg="robocup_ssl_comm" exec="grsim_node"/>

  <node pkg="crane_robot_receiver" exec="robot_receiver_node" output="screen"/>

  <node pkg="robocup_ssl_comm" exec="robot_status_node">
    <param name="blue_port" value="10311"/>
    <param name="yellow_port" value="10312"/>
  </node>

  <node pkg="consai_vision_tracker" exec="vision_tracker_node"/>

  <node pkg="crane_world_model_publisher" exec="crane_world_model_publisher_node">
    <param name="initial_team_color" value="YELLOW"/>
    <param name="team_name" value="$(var team)"/>
  </node>

  <node pkg="crane_play_switcher" exec="play_switcher_node" output="screen">
    <param name="team_name" value="$(var team)"/>
  </node>

  <node pkg="crane_speaker" exec="crane_speaker_node"/>

  <node pkg="speak_ros" exec="speak_ros_node">
    <param name="plugin_name" value="voicevox_plugin::VoiceVoxPlugin"/>
    <param name="voicevox_plugin/speaker" value="14"/>
    <param name="voicevox_plugin/speedScale" value="1.0"/>
    <param name="voicevox_plugin/volumeScale" value="1.0"/>
  </node>

  <node pkg="consai_visualizer" exec="consai_visualizer"/>
</launch>
